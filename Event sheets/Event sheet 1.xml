<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>Event sheet 1</name>
    <events>
        <variable comment="Seconds interval between spawning a new enemy." constant="0" name="EnemySpawnTime" sid="282933976022750" static="0" type="number">2</variable>
        <event-group description="" sid="336819386434150" title="Enemy control">
            <sub-events>
                <comment>Kick off the first enemy moving.</comment>
                <event-block sid="870956518848153">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="727788723886351" type="System" />
                    </conditions>
                    <actions>
                        <action behavior="Pathfinding" id="0" name="Find path" sid="385634706495397" type="Enemy">
                            <param id="0" name="X">EnemyTarget.X</param>
                            <param id="1" name="Y">EnemyTarget.Y</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Every 2 seconds, but gradually reducing the interval, spawn a new enemy and move it to the target.</comment>
                <event-block sid="325100336817978">
                    <conditions>
                        <condition id="-6" name="Every X seconds" sid="438336150124643" type="System">
                            <param id="0" name="Interval (seconds)">EnemySpawnTime</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Spawn another object" sid="967421745206545" type="EnemySpawner">
                            <param id="0" name="Object">Enemy</param>
                            <param id="1" name="Layer">&quot;Game&quot;</param>
                            <param id="2" name="Image point">0</param>
                        </action>
                        <action behavior="Pathfinding" id="0" name="Find path" sid="460707938288636" type="Enemy">
                            <param id="0" name="X">EnemyTarget.X</param>
                            <param id="1" name="Y">EnemyTarget.Y</param>
                        </action>
                    </actions>
                    <sub-events>
                        <comment>Every time an enemy spawn, the spawn interval reduces slightly.  This makes them very gradually come faster!  Make sure it doesn&apos;t go below every 0.5 seconds though.</comment>
                        <event-block sid="654460332570244">
                            <conditions>
                                <condition id="-14" name="Compare variable" sid="127939937089492" type="System">
                                    <param id="0" name="Variable">EnemySpawnTime</param>
                                    <param id="1" name="Comparison">4</param>
                                    <param id="2" name="Value">0.5</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-11" name="Subtract from" sid="459796173117626" type="System">
                                    <param id="0" name="Variable">EnemySpawnTime</param>
                                    <param id="1" name="Value">0.25</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>Once a path has been found, start moving along it.</comment>
                <event-block sid="342546933350798">
                    <conditions>
                        <condition behavior="Pathfinding" id="0" name="On path found" sid="604868537527480" type="Enemy" />
                    </conditions>
                    <actions>
                        <action behavior="Pathfinding" id="1" name="Move along path" sid="490694727288990" type="Enemy" />
                    </actions>
                </event-block>
                <comment>When bullets hit enemies, make it subtract from health and spawn some particles.</comment>
                <event-block sid="986301475241996">
                    <conditions>
                        <condition id="0" name="On collision with another object" sid="208065108598811" type="Bullet">
                            <param id="0" name="Object">Enemy</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-12" name="Subtract from" sid="738806644639996" type="Enemy">
                            <param id="0" name="Instance variable">health</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="-9" name="Destroy" sid="919716236864592" type="Bullet" />
                        <action id="0" name="Spawn another object" sid="411841674056455" type="Bullet">
                            <param id="0" name="Object">BulletImpactParticles</param>
                            <param id="1" name="Layer">&quot;Game&quot;</param>
                            <param id="2" name="Image point">1</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Destroy enemies with no health left, throwing in a particles effect.</comment>
                <event-block sid="895052163252276">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="814915265821769" type="Enemy">
                            <param id="0" name="Instance variable">health</param>
                            <param id="1" name="Comparison">3</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Spawn another object" sid="422427213951214" type="Enemy">
                            <param id="0" name="Object">EnemyDeadParticles</param>
                            <param id="1" name="Layer">&quot;Game&quot;</param>
                            <param id="2" name="Image point">0</param>
                        </action>
                        <action id="-9" name="Destroy" sid="401331429743094" type="Enemy" />
                    </actions>
                </event-block>
                <comment>When an enemy reaches the target, destroy it, but also pick a random turret and destroy that.</comment>
                <event-block sid="441041618588185">
                    <conditions>
                        <condition id="0" name="On collision with another object" sid="833859474024774" type="Enemy">
                            <param id="0" name="Object">EnemyTarget</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Destroy" sid="642031329790970" type="Enemy" />
                    </actions>
                    <sub-events>
                        <event-block sid="962447439162146">
                            <conditions>
                                <condition id="-16" name="Pick random instance" sid="737451521599264" type="System">
                                    <param id="0" name="Object">Turret</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Destroy" sid="497169809166533" type="Turret" />
                                <action id="0" name="Spawn another object" sid="773077321519389" type="Turret">
                                    <param id="0" name="Object">EnemyDeadParticles</param>
                                    <param id="1" name="Layer">&quot;Game&quot;</param>
                                    <param id="2" name="Image point">0</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="615844514578830" title="Turret control">
            <sub-events>
                <comment>Tell the turrets to target the enemies.</comment>
                <event-block sid="446631642571302">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="746765686527545" type="System" />
                    </conditions>
                    <actions>
                        <action behavior="Turret" id="1" name="Add object to target" sid="569645371018243" type="Turret">
                            <param id="0" name="Target">Enemy</param>
                        </action>
                    </actions>
                </event-block>
                <comment>When shooting, spawn a bullet.</comment>
                <event-block sid="370621017259578">
                    <conditions>
                        <condition behavior="Turret" id="1" name="On shoot" sid="813783613267636" type="Turret" />
                    </conditions>
                    <actions>
                        <action id="0" name="Spawn another object" sid="584890216103976" type="Turret">
                            <param id="0" name="Object">Bullet</param>
                            <param id="1" name="Layer">&quot;Game&quot;</param>
                            <param id="2" name="Image point">1</param>
                        </action>
                    </actions>
                </event-block>
                <comment>To prevent bullets that miss flying across the whole screen, destroy them when they&apos;ve travelled out of range.</comment>
                <event-block sid="303034468289751">
                    <conditions>
                        <condition behavior="Bullet" id="1" name="Compare distance travelled" sid="380656128443534" type="Bullet">
                            <param id="0" name="Comparison">5</param>
                            <param id="1" name="Distance">100</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Destroy" sid="692581055017045" type="Bullet" />
                    </actions>
                </event-block>
                <comment>Create new turrets by touching the walls.</comment>
                <event-block sid="915565595010658">
                    <conditions>
                        <condition id="3" name="On touched object" sid="390442572832453" type="Touch">
                            <param id="0" name="Object">Wall</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-3" name="Create object" sid="545751049464928" type="System">
                            <param id="0" name="Object to create">Turret</param>
                            <param id="1" name="Layer">&quot;Game&quot;</param>
                            <param id="2" name="X">round((Touch.X - 16) / 32) * 32 + 16</param>
                            <param id="3" name="Y">round((Touch.Y - 16) / 32) * 32 + 16</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="424401665562326">
                    <conditions>
                        <condition id="1" name="Is overlapping another object" sid="924257371582153" type="Turret">
                            <param id="0" name="Object">Turret</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Destroy" sid="310073156669554" type="Turret" />
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
    </events>
</c2eventsheet>
